// ==UserScript==
// @name okjike-ui
// @description 即刻网页版用户脚本。
// @author qzda
// @version 0.0.2
// @match https://web.okjike.com/*
// @namespace https://github.com/qzda/okjike-ui/
// @supportURL https://github.com/qzda/okjike-ui/issues/new
// @downloadURL https://raw.githubusercontent.com/qzda/okjike-ui/main/dist/okjike-ui.js
// @updateURL https://raw.githubusercontent.com/qzda/okjike-ui/main/dist/okjike-ui.js
// @icon https://raw.githubusercontent.com/qzda/okjike-ui/refs/heads/main/image/okjike-logo.png
// @run-at document-start
// @grant unsafeWindow
// @grant window.onurlchange
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_registerMenuCommand
// ==/UserScript==

var f0=Object.create;var{getPrototypeOf:A0,defineProperty:k0,getOwnPropertyNames:X0}=Object;var R0=Object.prototype.hasOwnProperty;var W0=(D,q,x)=>{x=D!=null?f0(A0(D)):{};const J=q||!D||!D.__esModule?k0(x,"default",{value:D,enumerable:!0}):x;for(let F of X0(D))if(!R0.call(J,F))k0(J,F,{get:()=>D[F],enumerable:!0});return J};var Q=(D,q)=>()=>(q||D((q={exports:{}}).exports,q),q.exports);var o=Q((U0,g)=>{(function(D,q){if(typeof define=="function"&&define.amd)define(q);else if(typeof g=="object"&&g.exports)g.exports=q();else D.EvEmitter=q()})(typeof window!="undefined"?window:U0,function(){function D(){}var q=D.prototype;return q.on=function(x,J){if(!x||!J)return;var F=this._events=this._events||{},U=F[x]=F[x]||[];if(U.indexOf(J)==-1)U.push(J);return this},q.once=function(x,J){if(!x||!J)return;this.on(x,J);var F=this._onceEvents=this._onceEvents||{},U=F[x]=F[x]||{};return U[J]=!0,this},q.off=function(x,J){var F=this._events&&this._events[x];if(!F||!F.length)return;var U=F.indexOf(J);if(U!=-1)F.splice(U,1);return this},q.emitEvent=function(x,J){var F=this._events&&this._events[x];if(!F||!F.length)return;F=F.slice(0),J=J||[];var U=this._onceEvents&&this._onceEvents[x];for(var T=0;T<F.length;T++){var K=F[T],Z=U&&U[K];if(Z)this.off(x,K),delete U[K];K.apply(this,J)}return this},q.allOff=function(){delete this._events,delete this._onceEvents},D})});var S=Q((u0,w)=>{/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(function(D,q){if(typeof define=="function"&&define.amd)define(q);else if(typeof w=="object"&&w.exports)w.exports=q();else D.getSize=q()})(window,function D(){function q(b){var A=parseFloat(b),Y=b.indexOf("%")==-1&&!isNaN(A);return Y&&A}function x(){}var J=typeof console=="undefined"?x:function(b){console.error(b)},F=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],U=F.length;function T(){var b={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var A=0;A<U;A++){var Y=F[A];b[Y]=0}return b}function K(b){var A=getComputedStyle(b);if(!A)J("Style returned "+A+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1");return A}var Z=!1,V;function M(){if(Z)return;Z=!0;var b=document.createElement("div");b.style.width="200px",b.style.padding="1px 2px 3px 4px",b.style.borderStyle="solid",b.style.borderWidth="1px 2px 3px 4px",b.style.boxSizing="border-box";var A=document.body||document.documentElement;A.appendChild(b);var Y=K(b);V=Math.round(q(Y.width))==200,f.isBoxSizeOuter=V,A.removeChild(b)}function f(b){if(M(),typeof b=="string")b=document.querySelector(b);if(!b||typeof b!="object"||!b.nodeType)return;var A=K(b);if(A.display=="none")return T();var Y={};Y.width=b.offsetWidth,Y.height=b.offsetHeight;var k=Y.isBorderBox=A.boxSizing=="border-box";for(var B=0;B<U;B++){var $=F[B],C=A[$],G=parseFloat(C);Y[$]=!isNaN(G)?G:0}var L=Y.paddingLeft+Y.paddingRight,W=Y.paddingTop+Y.paddingBottom,h=Y.marginLeft+Y.marginRight,j=Y.marginTop+Y.marginBottom,N=Y.borderLeftWidth+Y.borderRightWidth,E=Y.borderTopWidth+Y.borderBottomWidth,d=k&&V,B0=q(A.width);if(B0!==!1)Y.width=B0+(d?0:L+N);var $0=q(A.height);if($0!==!1)Y.height=$0+(d?0:W+E);return Y.innerWidth=Y.width-(L+N),Y.innerHeight=Y.height-(W+E),Y.outerWidth=Y.width+h,Y.outerHeight=Y.height+j,Y}return f})});var F0=Q((y0,c)=>{(function(D,q){if(typeof define=="function"&&define.amd)define(q);else if(typeof c=="object"&&c.exports)c.exports=q();else D.matchesSelector=q()})(window,function D(){var q=function(){var x=window.Element.prototype;if(x.matches)return"matches";if(x.matchesSelector)return"matchesSelector";var J=["webkit","moz","ms","o"];for(var F=0;F<J.length;F++){var U=J[F],T=U+"MatchesSelector";if(x[T])return T}}();return function x(J,F){return J[q](F)}})});var J0=Q((n0,z)=>{(function(D,q){if(typeof define=="function"&&define.amd)define(["desandro-matches-selector/matches-selector"],function(x){return q(D,x)});else if(typeof z=="object"&&z.exports)z.exports=q(D,F0());else D.fizzyUIUtils=q(D,D.matchesSelector)})(window,function D(q,x){var J={};J.extend=function(T,K){for(var Z in K)T[Z]=K[Z];return T},J.modulo=function(T,K){return(T%K+K)%K};var F=Array.prototype.slice;J.makeArray=function(T){if(Array.isArray(T))return T;if(T===null||T===void 0)return[];var K=typeof T=="object"&&typeof T.length=="number";if(K)return F.call(T);return[T]},J.removeFrom=function(T,K){var Z=T.indexOf(K);if(Z!=-1)T.splice(Z,1)},J.getParent=function(T,K){while(T.parentNode&&T!=document.body)if(T=T.parentNode,x(T,K))return T},J.getQueryElement=function(T){if(typeof T=="string")return document.querySelector(T);return T},J.handleEvent=function(T){var K="on"+T.type;if(this[K])this[K](T)},J.filterFindElements=function(T,K){T=J.makeArray(T);var Z=[];return T.forEach(function(V){if(!(V instanceof HTMLElement))return;if(!K){Z.push(V);return}if(x(V,K))Z.push(V);var M=V.querySelectorAll(K);for(var f=0;f<M.length;f++)Z.push(M[f])}),Z},J.debounceMethod=function(T,K,Z){Z=Z||100;var V=T.prototype[K],M=K+"Timeout";T.prototype[K]=function(){var f=this[M];clearTimeout(f);var b=arguments,A=this;this[M]=setTimeout(function(){V.apply(A,b),delete A[M]},Z)}},J.docReady=function(T){var K=document.readyState;if(K=="complete"||K=="interactive")setTimeout(T);else document.addEventListener("DOMContentLoaded",T)},J.toDashed=function(T){return T.replace(/(.)([A-Z])/g,function(K,Z,V){return Z+"-"+V}).toLowerCase()};var U=q.console;return J.htmlInit=function(T,K){J.docReady(function(){var Z=J.toDashed(K),V="data-"+Z,M=document.querySelectorAll("["+V+"]"),f=document.querySelectorAll(".js-"+Z),b=J.makeArray(M).concat(J.makeArray(f)),A=V+"-options",Y=q.jQuery;b.forEach(function(k){var B=k.getAttribute(V)||k.getAttribute(A),$;try{$=B&&JSON.parse(B)}catch(G){if(U)U.error("Error parsing "+V+" on "+k.className+": "+G);return}var C=new T(k,$);if(Y)Y.data(k,K,C)})})},J})});var M0=Q((p0,u)=>{(function(D,q){if(typeof define=="function"&&define.amd)define(["ev-emitter/ev-emitter","get-size/get-size"],q);else if(typeof u=="object"&&u.exports)u.exports=q(o(),S());else D.Outlayer={},D.Outlayer.Item=q(D.EvEmitter,D.getSize)})(window,function D(q,x){function J(k){for(var B in k)return!1;return B=null,!0}var F=document.documentElement.style,U=typeof F.transition=="string"?"transition":"WebkitTransition",T=typeof F.transform=="string"?"transform":"WebkitTransform",K={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[U],Z={transform:T,transition:U,transitionDuration:U+"Duration",transitionProperty:U+"Property",transitionDelay:U+"Delay"};function V(k,B){if(!k)return;this.element=k,this.layout=B,this.position={x:0,y:0},this._create()}var M=V.prototype=Object.create(q.prototype);M.constructor=V,M._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},M.handleEvent=function(k){var B="on"+k.type;if(this[B])this[B](k)},M.getSize=function(){this.size=x(this.element)},M.css=function(k){var B=this.element.style;for(var $ in k){var C=Z[$]||$;B[C]=k[$]}},M.getPosition=function(){var k=getComputedStyle(this.element),B=this.layout._getOption("originLeft"),$=this.layout._getOption("originTop"),C=k[B?"left":"right"],G=k[$?"top":"bottom"],L=parseFloat(C),W=parseFloat(G),h=this.layout.size;if(C.indexOf("%")!=-1)L=L/100*h.width;if(G.indexOf("%")!=-1)W=W/100*h.height;L=isNaN(L)?0:L,W=isNaN(W)?0:W,L-=B?h.paddingLeft:h.paddingRight,W-=$?h.paddingTop:h.paddingBottom,this.position.x=L,this.position.y=W},M.layoutPosition=function(){var k=this.layout.size,B={},$=this.layout._getOption("originLeft"),C=this.layout._getOption("originTop"),G=$?"paddingLeft":"paddingRight",L=$?"left":"right",W=$?"right":"left",h=this.position.x+k[G];B[L]=this.getXValue(h),B[W]="";var j=C?"paddingTop":"paddingBottom",N=C?"top":"bottom",E=C?"bottom":"top",d=this.position.y+k[j];B[N]=this.getYValue(d),B[E]="",this.css(B),this.emitEvent("layout",[this])},M.getXValue=function(k){var B=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!B?k/this.layout.size.width*100+"%":k+"px"},M.getYValue=function(k){var B=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&B?k/this.layout.size.height*100+"%":k+"px"},M._transitionTo=function(k,B){this.getPosition();var $=this.position.x,C=this.position.y,G=k==this.position.x&&B==this.position.y;if(this.setPosition(k,B),G&&!this.isTransitioning){this.layoutPosition();return}var L=k-$,W=B-C,h={};h.transform=this.getTranslate(L,W),this.transition({to:h,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},M.getTranslate=function(k,B){var $=this.layout._getOption("originLeft"),C=this.layout._getOption("originTop");return k=$?k:-k,B=C?B:-B,"translate3d("+k+"px, "+B+"px, 0)"},M.goTo=function(k,B){this.setPosition(k,B),this.layoutPosition()},M.moveTo=M._transitionTo,M.setPosition=function(k,B){this.position.x=parseFloat(k),this.position.y=parseFloat(B)},M._nonTransition=function(k){if(this.css(k.to),k.isCleaning)this._removeStyles(k.to);for(var B in k.onTransitionEnd)k.onTransitionEnd[B].call(this)},M.transition=function(k){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(k);return}var B=this._transn;for(var $ in k.onTransitionEnd)B.onEnd[$]=k.onTransitionEnd[$];for($ in k.to)if(B.ingProperties[$]=!0,k.isCleaning)B.clean[$]=!0;if(k.from){this.css(k.from);var C=this.element.offsetHeight;C=null}this.enableTransition(k.to),this.css(k.to),this.isTransitioning=!0};function f(k){return k.replace(/([A-Z])/g,function(B){return"-"+B.toLowerCase()})}var b="opacity,"+f(T);M.enableTransition=function(){if(this.isTransitioning)return;var k=this.layout.options.transitionDuration;k=typeof k=="number"?k+"ms":k,this.css({transitionProperty:b,transitionDuration:k,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(K,this,!1)},M.onwebkitTransitionEnd=function(k){this.ontransitionend(k)},M.onotransitionend=function(k){this.ontransitionend(k)};var A={"-webkit-transform":"transform"};M.ontransitionend=function(k){if(k.target!==this.element)return;var B=this._transn,$=A[k.propertyName]||k.propertyName;if(delete B.ingProperties[$],J(B.ingProperties))this.disableTransition();if($ in B.clean)this.element.style[k.propertyName]="",delete B.clean[$];if($ in B.onEnd){var C=B.onEnd[$];C.call(this),delete B.onEnd[$]}this.emitEvent("transitionEnd",[this])},M.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(K,this,!1),this.isTransitioning=!1},M._removeStyles=function(k){var B={};for(var $ in k)B[$]="";this.css(B)};var Y={transitionProperty:"",transitionDuration:"",transitionDelay:""};return M.removeTransitionStyles=function(){this.css(Y)},M.stagger=function(k){k=isNaN(k)?0:k,this.staggerDelay=k+"ms"},M.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},M.remove=function(){if(!U||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},M.reveal=function(){delete this.isHidden,this.css({display:""});var k=this.layout.options,B={},$=this.getHideRevealTransitionEndProperty("visibleStyle");B[$]=this.onRevealTransitionEnd,this.transition({from:k.hiddenStyle,to:k.visibleStyle,isCleaning:!0,onTransitionEnd:B})},M.onRevealTransitionEnd=function(){if(!this.isHidden)this.emitEvent("reveal")},M.getHideRevealTransitionEndProperty=function(k){var B=this.layout.options[k];if(B.opacity)return"opacity";for(var $ in B)return $},M.hide=function(){this.isHidden=!0,this.css({display:""});var k=this.layout.options,B={},$=this.getHideRevealTransitionEndProperty("hiddenStyle");B[$]=this.onHideTransitionEnd,this.transition({from:k.visibleStyle,to:k.hiddenStyle,isCleaning:!0,onTransitionEnd:B})},M.onHideTransitionEnd=function(){if(this.isHidden)this.css({display:"none"}),this.emitEvent("hide")},M.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},V})});var x0=Q((a0,y)=>{/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */(function(D,q){if(typeof define=="function"&&define.amd)define(["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(x,J,F,U){return q(D,x,J,F,U)});else if(typeof y=="object"&&y.exports)y.exports=q(D,o(),S(),J0(),M0());else D.Outlayer=q(D,D.EvEmitter,D.getSize,D.fizzyUIUtils,D.Outlayer.Item)})(window,function D(q,x,J,F,U){var{console:T,jQuery:K}=q,Z=function(){},V=0,M={};function f(B,$){var C=F.getQueryElement(B);if(!C){if(T)T.error("Bad element for "+this.constructor.namespace+": "+(C||B));return}if(this.element=C,K)this.$element=K(this.element);this.options=F.extend({},this.constructor.defaults),this.option($);var G=++V;this.element.outlayerGUID=G,M[G]=this,this._create();var L=this._getOption("initLayout");if(L)this.layout()}f.namespace="outlayer",f.Item=U,f.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var b=f.prototype;F.extend(b,x.prototype),b.option=function(B){F.extend(this.options,B)},b._getOption=function(B){var $=this.constructor.compatOptions[B];return $&&this.options[$]!==void 0?this.options[$]:this.options[B]},f.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},b._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),F.extend(this.element.style,this.options.containerStyle);var B=this._getOption("resize");if(B)this.bindResize()},b.reloadItems=function(){this.items=this._itemize(this.element.children)},b._itemize=function(B){var $=this._filterFindItemElements(B),C=this.constructor.Item,G=[];for(var L=0;L<$.length;L++){var W=$[L],h=new C(W,this);G.push(h)}return G},b._filterFindItemElements=function(B){return F.filterFindElements(B,this.options.itemSelector)},b.getItemElements=function(){return this.items.map(function(B){return B.element})},b.layout=function(){this._resetLayout(),this._manageStamps();var B=this._getOption("layoutInstant"),$=B!==void 0?B:!this._isLayoutInited;this.layoutItems(this.items,$),this._isLayoutInited=!0},b._init=b.layout,b._resetLayout=function(){this.getSize()},b.getSize=function(){this.size=J(this.element)},b._getMeasurement=function(B,$){var C=this.options[B],G;if(!C)this[B]=0;else{if(typeof C=="string")G=this.element.querySelector(C);else if(C instanceof HTMLElement)G=C;this[B]=G?J(G)[$]:C}},b.layoutItems=function(B,$){B=this._getItemsForLayout(B),this._layoutItems(B,$),this._postLayout()},b._getItemsForLayout=function(B){return B.filter(function($){return!$.isIgnored})},b._layoutItems=function(B,$){if(this._emitCompleteOnItems("layout",B),!B||!B.length)return;var C=[];B.forEach(function(G){var L=this._getItemLayoutPosition(G);L.item=G,L.isInstant=$||G.isLayoutInstant,C.push(L)},this),this._processLayoutQueue(C)},b._getItemLayoutPosition=function(){return{x:0,y:0}},b._processLayoutQueue=function(B){this.updateStagger(),B.forEach(function($,C){this._positionItem($.item,$.x,$.y,$.isInstant,C)},this)},b.updateStagger=function(){var B=this.options.stagger;if(B===null||B===void 0){this.stagger=0;return}return this.stagger=k(B),this.stagger},b._positionItem=function(B,$,C,G,L){if(G)B.goTo($,C);else B.stagger(L*this.stagger),B.moveTo($,C)},b._postLayout=function(){this.resizeContainer()},b.resizeContainer=function(){var B=this._getOption("resizeContainer");if(!B)return;var $=this._getContainerSize();if($)this._setContainerMeasure($.width,!0),this._setContainerMeasure($.height,!1)},b._getContainerSize=Z,b._setContainerMeasure=function(B,$){if(B===void 0)return;var C=this.size;if(C.isBorderBox)B+=$?C.paddingLeft+C.paddingRight+C.borderLeftWidth+C.borderRightWidth:C.paddingBottom+C.paddingTop+C.borderTopWidth+C.borderBottomWidth;B=Math.max(B,0),this.element.style[$?"width":"height"]=B+"px"},b._emitCompleteOnItems=function(B,$){var C=this;function G(){C.dispatchEvent(B+"Complete",null,[$])}var L=$.length;if(!$||!L){G();return}var W=0;function h(){if(W++,W==L)G()}$.forEach(function(j){j.once(B,h)})},b.dispatchEvent=function(B,$,C){var G=$?[$].concat(C):C;if(this.emitEvent(B,G),K)if(this.$element=this.$element||K(this.element),$){var L=K.Event($);L.type=B,this.$element.trigger(L,C)}else this.$element.trigger(B,C)},b.ignore=function(B){var $=this.getItem(B);if($)$.isIgnored=!0},b.unignore=function(B){var $=this.getItem(B);if($)delete $.isIgnored},b.stamp=function(B){if(B=this._find(B),!B)return;this.stamps=this.stamps.concat(B),B.forEach(this.ignore,this)},b.unstamp=function(B){if(B=this._find(B),!B)return;B.forEach(function($){F.removeFrom(this.stamps,$),this.unignore($)},this)},b._find=function(B){if(!B)return;if(typeof B=="string")B=this.element.querySelectorAll(B);return B=F.makeArray(B),B},b._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this)},b._getBoundingRect=function(){var B=this.element.getBoundingClientRect(),$=this.size;this._boundingRect={left:B.left+$.paddingLeft+$.borderLeftWidth,top:B.top+$.paddingTop+$.borderTopWidth,right:B.right-($.paddingRight+$.borderRightWidth),bottom:B.bottom-($.paddingBottom+$.borderBottomWidth)}},b._manageStamp=Z,b._getElementOffset=function(B){var $=B.getBoundingClientRect(),C=this._boundingRect,G=J(B),L={left:$.left-C.left-G.marginLeft,top:$.top-C.top-G.marginTop,right:C.right-$.right-G.marginRight,bottom:C.bottom-$.bottom-G.marginBottom};return L},b.handleEvent=F.handleEvent,b.bindResize=function(){q.addEventListener("resize",this),this.isResizeBound=!0},b.unbindResize=function(){q.removeEventListener("resize",this),this.isResizeBound=!1},b.onresize=function(){this.resize()},F.debounceMethod(f,"onresize",100),b.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout())return;this.layout()},b.needsResizeLayout=function(){var B=J(this.element),$=this.size&&B;return $&&B.innerWidth!==this.size.innerWidth},b.addItems=function(B){var $=this._itemize(B);if($.length)this.items=this.items.concat($);return $},b.appended=function(B){var $=this.addItems(B);if(!$.length)return;this.layoutItems($,!0),this.reveal($)},b.prepended=function(B){var $=this._itemize(B);if(!$.length)return;var C=this.items.slice(0);this.items=$.concat(C),this._resetLayout(),this._manageStamps(),this.layoutItems($,!0),this.reveal($),this.layoutItems(C)},b.reveal=function(B){if(this._emitCompleteOnItems("reveal",B),!B||!B.length)return;var $=this.updateStagger();B.forEach(function(C,G){C.stagger(G*$),C.reveal()})},b.hide=function(B){if(this._emitCompleteOnItems("hide",B),!B||!B.length)return;var $=this.updateStagger();B.forEach(function(C,G){C.stagger(G*$),C.hide()})},b.revealItemElements=function(B){var $=this.getItems(B);this.reveal($)},b.hideItemElements=function(B){var $=this.getItems(B);this.hide($)},b.getItem=function(B){for(var $=0;$<this.items.length;$++){var C=this.items[$];if(C.element==B)return C}},b.getItems=function(B){B=F.makeArray(B);var $=[];return B.forEach(function(C){var G=this.getItem(C);if(G)$.push(G)},this),$},b.remove=function(B){var $=this.getItems(B);if(this._emitCompleteOnItems("remove",$),!$||!$.length)return;$.forEach(function(C){C.remove(),F.removeFrom(this.items,C)},this)},b.destroy=function(){var B=this.element.style;B.height="",B.position="",B.width="",this.items.forEach(function(C){C.destroy()}),this.unbindResize();var $=this.element.outlayerGUID;if(delete M[$],delete this.element.outlayerGUID,K)K.removeData(this.element,this.constructor.namespace)},f.data=function(B){B=F.getQueryElement(B);var $=B&&B.outlayerGUID;return $&&M[$]},f.create=function(B,$){var C=A(f);if(C.defaults=F.extend({},f.defaults),F.extend(C.defaults,$),C.compatOptions=F.extend({},f.compatOptions),C.namespace=B,C.data=f.data,C.Item=A(U),F.htmlInit(C,B),K&&K.bridget)K.bridget(B,C);return C};function A(B){function $(){B.apply(this,arguments)}return $.prototype=Object.create(B.prototype),$.prototype.constructor=$,$}var Y={ms:1,s:1000};function k(B){if(typeof B=="number")return B;var $=B.match(/(^\d*\.?\d*)(\w*)/),C=$&&$[1],G=$&&$[2];if(!C.length)return 0;C=parseFloat(C);var L=Y[G]||1;return C*L}return f.Item=U,f})});var G0=Q((r0,n)=>{/*!
 * Masonry v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */(function(D,q){if(typeof define=="function"&&define.amd)define(["outlayer/outlayer","get-size/get-size"],q);else if(typeof n=="object"&&n.exports)n.exports=q(x0(),S());else D.Masonry=q(D.Outlayer,D.getSize)})(window,function D(q,x){var J=q.create("masonry");J.compatOptions.fitWidth="isFitWidth";var F=J.prototype;return F._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var U=0;U<this.cols;U++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},F.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var U=this.items[0],T=U&&U.element;this.columnWidth=T&&x(T).outerWidth||this.containerWidth}var K=this.columnWidth+=this.gutter,Z=this.containerWidth+this.gutter,V=Z/K,M=K-Z%K,f=M&&M<1?"round":"floor";V=Math[f](V),this.cols=Math.max(V,1)},F.getContainerWidth=function(){var U=this._getOption("fitWidth"),T=U?this.element.parentNode:this.element,K=x(T);this.containerWidth=K&&K.innerWidth},F._getItemLayoutPosition=function(U){U.getSize();var T=U.size.outerWidth%this.columnWidth,K=T&&T<1?"round":"ceil",Z=Math[K](U.size.outerWidth/this.columnWidth);Z=Math.min(Z,this.cols);var V=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",M=this[V](Z,U),f={x:this.columnWidth*M.col,y:M.y},b=M.y+U.size.outerHeight,A=Z+M.col;for(var Y=M.col;Y<A;Y++)this.colYs[Y]=b;return f},F._getTopColPosition=function(U){var T=this._getTopColGroup(U),K=Math.min.apply(Math,T);return{col:T.indexOf(K),y:K}},F._getTopColGroup=function(U){if(U<2)return this.colYs;var T=[],K=this.cols+1-U;for(var Z=0;Z<K;Z++)T[Z]=this._getColGroupY(Z,U);return T},F._getColGroupY=function(U,T){if(T<2)return this.colYs[U];var K=this.colYs.slice(U,U+T);return Math.max.apply(Math,K)},F._getHorizontalColPosition=function(U,T){var K=this.horizontalColIndex%this.cols,Z=U>1&&K+U>this.cols;K=Z?0:K;var V=T.size.outerWidth&&T.size.outerHeight;return this.horizontalColIndex=V?K+U:this.horizontalColIndex,{col:K,y:this._getColGroupY(K,U)}},F._manageStamp=function(U){var T=x(U),K=this._getElementOffset(U),Z=this._getOption("originLeft"),V=Z?K.left:K.right,M=V+T.outerWidth,f=Math.floor(V/this.columnWidth);f=Math.max(0,f);var b=Math.floor(M/this.columnWidth);b-=M%this.columnWidth?0:1,b=Math.min(this.cols-1,b);var A=this._getOption("originTop"),Y=(A?K.top:K.bottom)+T.outerHeight;for(var k=f;k<=b;k++)this.colYs[k]=Math.max(Y,this.colYs[k])},F._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var U={height:this.maxY};if(this._getOption("fitWidth"))U.width=this._getContainerFitWidth();return U},F._getContainerFitWidth=function(){var U=0,T=this.cols;while(--T){if(this.colYs[T]!==0)break;U++}return(this.cols-U)*this.columnWidth-this.gutter},F.needsResizeLayout=function(){var U=this.containerWidth;return this.getContainerWidth(),U!=this.containerWidth},J})});var C0={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97},b0={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107},D0={bold:1,italic:3,underline:4},h0=Object.assign(Object.assign(Object.assign({},Object.keys(C0).reduce((D,q)=>{return D[q]=(x)=>`\x1B[${C0[q]}m${x}\x1B[0m`,D},{})),Object.keys(b0).reduce((D,q)=>{return D[q]=(x)=>`\x1B[${b0[q]}m${x}\x1B[0m`,D},{})),Object.keys(D0).reduce((D,q)=>{return D[q]=(x)=>`\x1B[${D0[q]}m${x}\x1B[0m`,D},{})),v=h0;var p="okjike-ui",a="0.0.2";var r=!1;function l(...D){console.log(v.bgBlack(v.brightYellow(`${p} ${a}`)),...D)}function H0(...D){console.log(v.bgRed(`${p} ${a}`),...D)}function R(...D){if(r)l(...D)}function T0(...D){if(r)H0(...D)}var Q0={mainWrapper:"#__next > div > div",navBar:"#__next > div > div > div",navBarItems:{links:"#__next > div > div > div > div > div",linksItem:{logo:"#__next > div > div > div > div > div > a:nth-child(1)",home:"#__next > div > div > div > div > div > a:nth-child(2)",recommend:"#__next > div > div > div > div > div > a:nth-child(3)"},searchWrapper:"#__next > div > div > div > div > div:nth-child(2)",searchWrapperInput:"#__next > div > div > div > div > div:nth-child(2) > input"},mainColumn:"#__next > div > div > div:nth-child(2) > div",mainColumnItems:{newPost:`${"#__next > div > div > div:nth-child(2) > div"} > div:has(textarea[placeholder="\u5206\u4EAB\u4F60\u7684\u60F3\u6CD5..."])`,newMessage:'#__next > div > div > div:nth-child(2) > div > div[class*="NewMessageNoti"]',posts:"#__next > div > div > div:nth-child(2) > div > div:last-child > div",postAction:"#__next > div > div > div:nth-child(2) > div > div:last-child > div > div article > div:nth-child(2) > div:last-child > div:last-child"},sideBar:"#__next > div > div > div:nth-child(2) > aside",sideBarItems:{userInfo:"#__next > div > div > div:nth-child(2) > aside > div",groupInfo:"#__next > div > div > div:nth-child(2) > aside > div:nth-child(2)",footer:"#__next > div > div > div:nth-child(2) > aside > footer"}},X=Q0;function K0(D){document.getElementById(D)?.remove()}function m(D){if(D)H("body","body { opacity: 0; };"),R("hiddenBody true");else I("body"),R("hiddenBody false")}function H(D,q){const x="okjike-ui-"+D,J=document.getElementById(x),F=document.querySelector("head");if(J){if(J.textContent!==q)J.textContent=q}else{const U=document.createElement("style");U.id=x,U.textContent=q,F?.appendChild(U)}}function I(D){const q="okjike-ui-"+D;K0(q)}var Z0=W0(G0(),1);function _(D){return D==="/"||D==="/recommend"}function P(D){if(R("changeTimelineStyle start"),D){const q=document.querySelector(`${X.navBar} > div`)?.getBoundingClientRect().width,x=q?q/(q/400>>0):400;R("postWidth",x),H("timelineStyle",`
        ${X.mainColumn} {
          min-width: 600px;
          max-width: 100%;
          padding: 0px 160px;
        }
        @media (max-width: 1536px) {
          ${X.mainColumn} { padding: 0px 48px; }
        }
        @media (max-width: 1280px) {
          ${X.mainColumn} { padding: 0px 32px; }
        }
        @media (max-width: 1024px) {
          ${X.mainColumn} { padding: 0px 16px; }
        }

        ${X.mainColumnItems.posts} > div {
          height: fit-content;
          min-width: 400px;
          width: ${x}px;
        }
        ${X.mainColumnItems.posts} > div > div {
          border-color: transparent;
          border-top-width: 10px;
          border-left-width: 5px;
          border-right-width: 5px;
        }

        /* \u5E16\u5B50\u5BBD\u5EA6\u8FC7\u5C0F\u65F6\u5E16\u5B50\u7684\u64CD\u4F5C\u680F\u4F1A\u6EA2\u51FA */
        ${X.mainColumnItems.postAction} { justify-content: space-between; }
        ${X.mainColumnItems.postAction} > div { min-width: unset; }
        ${X.mainColumnItems.postAction} > div.flex-1 { flex: 0; }
        `),R("changeTimelineStyle",!0)}else I("timelineStyle"),R("changeTimelineStyle",!1);R("changeTimelineStyle done")}function O(){R("updatePostLocation start");const q=document.querySelector(`${X.navBar} > div`)?.getBoundingClientRect().width;if(q){const x=q/(q/400>>0),J=new Z0.default(X.mainColumnItems.posts,{columnWidth:x,itemSelector:`${X.mainColumnItems.posts} > div`,transitionDuration:0,fitWidth:!0,cols:q/x});R("masonry",J)}else T0("updatePostLocation can not found navBarWidth",q);R("updatePostLocation done")}function i(){const D=document.querySelector(X.mainColumnItems.posts),q=document.querySelector(X.navBar);if(D&&q?.getBoundingClientRect().width)return O(),new MutationObserver((x)=>{O()}).observe(D,{childList:!0}),R("observerPosts",!0),!0;return R("observerPosts",!1),!1}function s(D){if(D)H("hiddenTimeline",`
        ${X.mainColumn} { opacity: 0; };
      `),R("hiddenTimeline",!0);else I("hiddenTimeline"),R("hiddenTimeline",!1)}function t(D){if(D)H("hiddenSidebar",`
      ${X.sideBar} {
        display: none;
      }
      ${X.sideBar} > div {
        margin: 0;
        border-radius: 10px;
        overflow: hidden;
        box-shadow:
          4px 8px 8px rgba(128, 128, 128, 0.5);
      }
      ${X.sideBar} > footer {
        display: none;
      }
      `),R("hiddenSidebar true");else H("hiddenSidebar",`
      ${X.sideBar} {
        display: none;
      }
      `),R("hiddenSidebar false")}function Y0(){GM_registerMenuCommand("\u663E\u793A/\u9690\u85CF\u4FA7\u8FB9\u680F",function(D){alert("\uD83D\uDEA7\u65BD\u5DE5\u4E2D")},{autoClose:!1})}function e(D){if(D)H("hiddenNewPost",`
      ${X.mainColumnItems.newPost} {
        display: none;
      }
      `),R("hiddenNewPost true");else I("hiddenNewPost"),R("hiddenNewPost false")}function L0(){if(_(location.pathname))P(!0),t(!0),e(!0);else P(!1),t(!1),e(!1);m(!1),window.addEventListener("urlchange",(q)=>{R("urlchange",q);const x=new URL(q.url);if(_(x.pathname))s(!0);else P(!1);const J=setInterval(()=>{if(_(x.pathname)){if(i())P(!0),s(!1),clearInterval(J)}else if(document.querySelector(X.navBar))clearInterval(J)},200)}),window.addEventListener("load",(q)=>{if(R("window load"),_(location.pathname))O()});let D=!0;window.addEventListener("resize",(q)=>{if(D&&_(location.pathname))D=!1,R("window resize updatePostLocation"),setTimeout(()=>{P(!0),O(),D=!0},200)})}l();Y0();m(!0);var V0=setInterval(()=>{if(_(location.pathname)){if(i())L0(),clearInterval(V0)}else if(document.querySelector(X.navBar))L0(),clearInterval(V0)},200);
